<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Variáveis Globais (all.yml)</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    .var-field { 
      display: flex; 
      gap: 10px; 
      align-items: center; 
      margin-bottom: 10px; 
    }
    .var-field input {
      flex: 1;
    }
    .remove-btn {
      background-color: #ff4d4d;
      border: none;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
    }
    .remove-btn:hover {
      background-color: #d93636;
    }
    #addVarBtn {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    #addVarBtn:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Definir Variáveis Globais - group_vars/all.yml</h1>

    <form id="varsForm">
      <div id="varsContainer">
        <!-- Campos padrão -->
        <div class="var-field">
          <label>mgmt_user:</label>
          <input type="text" name="mgmt_user" placeholder="ansible-mgmt" required>
        </div>
        <div class="var-field">
          <label>elastic_mount_point:</label>
          <input type="text" name="elastic_mount_point" placeholder="/var/lib/elasticsearch">
        </div>
        <div class="var-field">
          <label>elastic_user:</label>
          <input type="text" name="elastic_user" placeholder="elastic">
        </div>
        <div class="var-field">
          <label>elastic_version:</label>
          <input type="text" name="elastic_version" placeholder="8.19.5">
        </div>
        <div class="var-field">
          <label>elastic_agent_version:</label>
          <input type="text" name="elastic_agent_version" placeholder="8.19.5">
        </div>
        <div class="var-field">
          <label>agent_install_dir:</label>
          <input type="text" name="agent_install_dir" placeholder="/tmp">
        </div>
        <div class="var-field">
          <label>home_directory_ansible:</label>
          <input type="text" name="home_directory_ansible" placeholder="lrodrigues">
        </div>
        <div class="var-field">
          <label>fleet_cert_dir:</label>
          <input type="text" name="fleet_cert_dir" placeholder="/etc/fleet-server/certs">
        </div>
        <div class="var-field">
          <label>policy_name:</label>
          <input type="text" name="policy_name" placeholder="fleet-server-policy-testing">
        </div>
        <div class="var-field">
          <label>policy_namespace:</label>
          <input type="text" name="policy_namespace" placeholder="default">
        </div>
        <div class="var-field">
          <label>policy_description:</label>
          <input type="text" name="policy_description" placeholder="Policy fleet criada via API pelo Ansible">
        </div>
        <div class="var-field">
          <label>policy_name_agent:</label>
          <input type="text" name="policy_name_agent" placeholder="linux-agent-policy">
        </div>
        <div class="var-field">
          <label>policy_namespace_agent:</label>
          <input type="text" name="policy_namespace_agent" placeholder="default">
        </div>
        <div class="var-field">
          <label>policy_description_agent:</label>
          <input type="text" name="policy_description_agent" placeholder="Policy agent criada via API pelo Ansible">
        </div>
        <div class="var-field">
          <label>nome_fleet_server:</label>
          <input type="text" name="nome_fleet_server" placeholder="fleet-server">
        </div>
        <div class="var-field">
          <label>kibana_server_name:</label>
          <input type="text" name="kibana_server_name" placeholder="kibana01">
        </div>
        <div class="var-field">
          <label>nome_do_ca:</label>
          <input type="text" name="nome_do_ca" placeholder="elastic-stack-ca.p12">
        </div>
        <div class="var-field">
          <label>nome_do_ca_pem:</label>
          <input type="text" name="nome_do_ca_pem" placeholder="elastic-stack-ca.pem">
        </div>
        <div class="var-field">
          <label>nome_crt_ca:</label>
          <input type="text" name="nome_crt_ca" placeholder="elastic-stack-ca.crt">
        </div>
        <div class="var-field">
          <label>nome_key_ca:</label>
          <input type="text" name="nome_key_ca" placeholder="elastic-stack-ca.key">
        </div>
        <div class="var-field">
          <label>nome_do_cert_elastic:</label>
          <input type="text" name="nome_do_cert_elastic" placeholder="elastic-certificate.p12">
        </div>
        <div class="var-field">
          <label>single_node:</label>
          <select name="single_node">
            <option value="false">false</option>
            <option value="true">true</option>
          </select>
        </div>
        <div class="var-field">
          <label>new_cluster:</label>
          <select name="new_cluster">
            <option value="true">true</option>
            <option value="false">false</option>
          </select>
        </div>
        <div class="var-field">
          <label>usar_ca_existente:</label>
          <select name="usar_ca_existente">
            <option value="false">false</option>
            <option value="true">true</option>
          </select>
        </div>
      </div>

      <button type="button" id="addVarBtn">+ Adicionar nova variável</button>
      <br><br>
      <button type="submit">Gerar all.yml</button>
    </form>
    
    <a href="/all_vault" class="secondary-button">Configurar Variáveis do all_vault</a>

    <div id="response"></div>
  </div>

  <script src="{{ url_for('static', filename='all_variables.js') }}"></script>
</body>
</html>
